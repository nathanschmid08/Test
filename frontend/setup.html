<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--Link for Remix Icons-->
    <link href="https://unpkg.com/remixicon/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="styles/setup.css">
    <link rel="stylesheet" href="styles/mimo.css">

    <title>Setup</title>
</head>
<body>
    <main class="setup-shell">
        <section class="setup-card">
            <div class="form-intro">
                <p class="eyebrow">SentinelIS</p>
                <h1>Provision your company space</h1>
                <p class="muted">We only need the core details to spin up a secure tenant. You can refine everything later.</p>
            </div>

            <form id="SetupForm">
                <div class="field">
                    <label for="company-name"><i class="ri-building-4-fill"></i> Company Name</label>
                    <p class="helper">Enter the name for the company you're setting SentinelIS up for.</p>
                    <input type="text" id="company-name" name="company-name" required>
                </div>

                <div class="field">
                    <label for="company-desc"><i class="ri-file-text-fill"></i> Company Description</label>
                    <p class="helper">Enter a brief description of your company.</p>
                    <input type="text" id="company-desc" name="company-desc" required>
                </div>

                <div class="field">
                    <label for="user-abbr"><i class="ri-account-circle-fill"></i> Initials</label>
                    <p class="helper">Enter your initials. Up to 4 characters, used later as your username.</p>
                    <input type="text" id="user-abbr" name="user-abbr" maxlength="4" required>
                </div>

                <div class="field two-col">
                    <div>
                        <label for="firstname"><i class="ri-user-3-fill"></i> First Name</label>
                        <p class="helper">Enter your first name.</p>
                        <input type="text" id="firstname" name="firstname" required>
                    </div>
                    <div>
                        <label for="surname"><i class="ri-user-3-fill"></i> Surname</label>
                        <p class="helper">Enter your surname.</p>
                        <input type="text" id="surname" name="surname" required>
                    </div>
                </div>

                <div class="field">
                    <label for="role"><i class="ri-briefcase-3-fill"></i> Role</label>
                    <p class="helper">Enter your role.</p>
                    <input type="text" id="role" name="role" required>
                </div>
                
                <div class="field two-col">
                    <div>
                        <label for="password"><i class="ri-lock-fill"></i> Password</label>
                        <p class="helper">Enter a strong password.</p>
                        <input type="password" id="password" name="password" required>
                    </div>
                    <div>
                        <label for="password-repeat"><i class="ri-lock-password-fill"></i> Repeat Password</label>
                        <p class="helper">Repeat the password to confirm.</p>
                        <input type="password" id="password-repeat" name="password-repeat" required>
                    </div>
                </div>

                <p class="note">As the creator of the company, you can edit or update the information later.</p>
                
                <button type="submit">Complete Setup</button>

                <!-- error display -->
                <div id="loginError"></div>
            </form>    
        </section>

        <aside class="setup-assistant" id="setup-robot">
            <!--Remix Icon for Setup Robot-->
            <i class="ri-robot-3-fill"></i>
            <h2>Chat assistant</h2>
            <p class="muted">Need help with requirements? Ask me while you configure SentinelIS.</p>
            <button type="button" class="ghost" id="askMimoBtn">Ask Mimo</button>
        </aside>
    </main>

    <!-- Setup result modal -->
    <div id="setupResultOverlay" class="setup-modal-overlay setup-modal-hidden" aria-hidden="true">
        <div class="setup-modal" role="dialog" aria-labelledby="setupModalTitle" aria-modal="true">
            <div class="setup-modal-header">
                <h2 id="setupModalTitle">Company provisioned</h2>
                <button type="button" class="setup-modal-close" id="setupModalCloseBtn" aria-label="Close">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <div class="setup-modal-body">
                <p class="muted">
                    Your company space has been created. These are your initial SentinelIS credentials.
                    Store them securely before continuing.
                </p>
                <div class="setup-modal-summary">
                    <div>
                        <span class="setup-modal-label">Company</span>
                        <span id="summaryCompanyName" class="setup-modal-value"></span>
                    </div>
                    <div>
                        <span class="setup-modal-label">Company ID</span>
                        <span id="summaryCompanyId" class="setup-modal-value code"></span>
                    </div>
                    <div>
                        <span class="setup-modal-label">Admin name</span>
                        <span id="summaryAdminName" class="setup-modal-value"></span>
                    </div>
                    <div>
                        <span class="setup-modal-label">Admin initials</span>
                        <span id="summaryAdminInitials" class="setup-modal-value code"></span>
                    </div>
                    <div>
                        <span class="setup-modal-label">Role</span>
                        <span id="summaryAdminRole" class="setup-modal-value"></span>
                    </div>
                </div>

                <p class="setup-modal-warning">
                    The JSON file you download next contains sensitive information (including your password).
                    Keep it safe and do not share it publicly.
                </p>
            </div>
            <div class="setup-modal-footer">
                <button type="button" id="downloadCredentialsBtn">
                    <i class="ri-download-cloud-2-line"></i>
                    Download credentials (.json)
                </button>
                <button type="button" class="ghost" id="goToLoginBtn">
                    Go to login
                </button>
            </div>
        </div>
    </div>

    <!-- Mimo Chat Popup -->
    <div id="mimoChatOverlay" class="mimo-chat-overlay mimo-chat-hidden" aria-hidden="true">
        <div class="mimo-chat-modal" role="dialog" aria-labelledby="mimoChatTitle" aria-modal="true">
            <div class="mimo-chat-header">
                <div class="mimo-chat-title-wrapper">
                    <i class="ri-robot-3-fill"></i>
                    <h2 id="mimoChatTitle">Mimo</h2>
                </div>
                <button type="button" class="mimo-chat-close" id="mimoChatCloseBtn" aria-label="Close">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <div class="mimo-chat-body" id="mimoChatBody">
                <div class="mimo-message mimo-message-bot">
                    <div class="mimo-message-avatar">
                        <i class="ri-robot-3-fill"></i>
                    </div>
                    <div class="mimo-message-content">
                        <p>Hello! I'm Mimo, your personal chat assistant. How can I help you with SentinelIS setup today?</p>
                    </div>
                </div>
            </div>
            <div class="mimo-chat-footer">
                <form id="mimoChatForm" class="mimo-chat-input-wrapper">
                    <input 
                        type="text" 
                        id="mimoChatInput" 
                        placeholder="Ask me anything about SentinelIS..." 
                        autocomplete="off"
                        required
                    />
                    <button type="submit" class="mimo-chat-send" id="mimoChatSendBtn" aria-label="Send message">
                        <i class="ri-send-plane-fill"></i>
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="scripts/setup-handler.js"></script>
    <script src="scripts/mimo.js"></script>
</body>
</html>